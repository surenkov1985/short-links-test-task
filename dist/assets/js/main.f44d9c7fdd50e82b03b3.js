!function(){var e,t={8898:function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n,r,o,c,a,i,l="http://79.143.31.216/",u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return fetch(l+e,{method:n,body:t,headers:r})},s="asc_short",d="0",f="5",m=document.getElementById("loginForm"),v=document.getElementById("registerForm"),p=document.getElementById("squeezeForm"),g=document.querySelector(".error"),h=document.querySelector(".reg-error"),y=document.querySelector(".loginPage"),S=document.querySelector(".registerPage"),L=document.querySelector(".header"),O=document.querySelector(".statisticsPage"),b=document.querySelectorAll(".loginBtn"),E=document.querySelectorAll(".registerBtn"),T=document.querySelector(".outBtn");function k(t){return new URLSearchParams(e(Object.entries(t))).toString()}function w(e,t,s){var d=k({order:e,offset:t,limit:s}),f=JSON.parse(localStorage.getItem("user")),m={"Content-Type":"application/json",Authorization:f.token_type+" "+f.access_token};u("statistics?".concat(d),null,"GET",m).then((function(e){return e.ok||console.log(e),e.json()})).then((function(e){return function(e){var t=document.querySelector(".statisticListHead"),u=document.createElement("ul");u.className="statisticList",t.innerHTML="",e.map((function(e){var t=l+"s/"+e.short;n=document.createElement("li"),r=document.createElement("div"),o=document.createElement("div"),c=document.createElement("div"),a=document.createElement("a"),i=document.createElement("button"),r.className="linkEl",o.className="shortEl",c.className="counterEl",n.className="statisticItem",i.className="linkCopyBtn",a.href=t,a.target="_blank",a.innerHTML=t,i.innerHTML="Copy",r.innerHTML=e.target,c.innerHTML=e.counter,o.appendChild(a),o.appendChild(i),n.appendChild(r),n.appendChild(o),n.appendChild(c),u.appendChild(n),i.addEventListener("click",(function(){navigator.clipboard.writeText(t)}))})),t.appendChild(u),document.querySelectorAll(".shortEl")}(e)})).catch((function(e){return console.log(e)}))}localStorage.hasOwnProperty("user")&&(O.classList.toggle("active"),y.classList.remove("active"),L.classList.toggle("active"),w(s,d,f)),T.addEventListener("click",(function(e){e.preventDefault(),localStorage.removeItem("user"),y.classList.toggle("active"),L.classList.remove("active"),O.classList.remove("active")})),b.forEach((function(e){e.addEventListener("click",(function(){localStorage.hasOwnProperty("user")||(S.classList.remove("active"),y.classList.toggle("active"))}))})),E.forEach((function(e){e.addEventListener("click",(function(){localStorage.hasOwnProperty("user")||(y.classList.remove("active"),S.classList.toggle("active"))}))})),null==m||m.addEventListener("submit",(function(e){e.preventDefault();var t=m.querySelector('[name="username"]'),n=m.querySelector('[name="password"]'),r=k({username:t.value,password:n.value});u("login",r,"POST",{"Content-Type":"application/x-www-form-urlencoded"}).then((function(e){return console.log(e),e.json()})).then((function(e){e.access_token&&(localStorage.setItem("user",JSON.stringify(e)),S.classList.remove("active"),y.classList.remove("active"),O.classList.toggle("active"),L.classList.toggle("active"),g.innerHTML=""),g.innerHTML=e.detail})).then((function(){w(s,d,f)})).catch((function(e){return console.log(e)}))})),null==v||v.addEventListener("submit",(function(e){e.preventDefault();var t=v.querySelector('[name="username"]'),n=v.querySelector('[name="password"]'),r={username:t.value,password:n.value},o=k(r);u("register?".concat(o),JSON.stringify(r),"POST",{"Content-Type":"application/json"}).then((function(e){return e.json()})).then((function(e){e.username&&(u("login",o,"POST",{"Content-Type":"application/x-www-form-urlencoded"}).then((function(e){return e.json()})).then((function(e){e.access_token&&(localStorage.setItem("user",JSON.stringify(e)),S.classList.remove("active"),O.classList.toggle("active"),L.classList.toggle("active"),g.innerHTML="data.detail"),g.innerHTML=e.detail})).then((function(){w(s,d,f)})).catch((function(e){return console.log(e)})),h.innerHTML=""),h.innerHTML=e.detail})).catch((function(e){return console.log(e)}))})),null==p||p.addEventListener("submit",(function(e){e.preventDefault();var t=p.querySelector('[name="link"]'),n=k({link:/^http(s)?:\/\//.test(t.value)?t.value:"http://"+t.value}),r=JSON.parse(localStorage.getItem("user")),o={"Content-Type":"application/json",Authorization:r.token_type+" "+r.access_token};u("squeeze?".concat(n),null,"POST",o).then((function(e){return e.json()})).then((function(e){w(s,d,f),t.value=""})).catch((function(e){return console.log(e)}))}))},7723:function(e,t,n){"use strict";n(8898)}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var c=n[e]={id:e,loaded:!1,exports:{}};return t[e](c,c.exports,r),c.loaded=!0,c.exports}r.m=t,e=[],r.O=function(t,n,o,c){if(!n){var a=1/0;for(s=0;s<e.length;s++){n=e[s][0],o=e[s][1],c=e[s][2];for(var i=!0,l=0;l<n.length;l++)(!1&c||a>=c)&&Object.keys(r.O).every((function(e){return r.O[e](n[l])}))?n.splice(l--,1):(i=!1,c<a&&(a=c));if(i){e.splice(s--,1);var u=o();void 0!==u&&(t=u)}}return t}c=c||0;for(var s=e.length;s>0&&e[s-1][2]>c;s--)e[s]=e[s-1];e[s]=[n,o,c]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={179:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,c,a=n[0],i=n[1],l=n[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(l)var s=l(r)}for(t&&t(n);u<a.length;u++)c=a[u],r.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return r.O(s)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),r.O(void 0,[5],(function(){return r(6005)}));var o=r.O(void 0,[5],(function(){return r(7723)}));o=r.O(o)}();